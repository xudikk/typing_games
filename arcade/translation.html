<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeoCoder Translation Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Source+Sans+Pro:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0A1122;
      --secondary: #38BDF8;
      --accent: #34D399;
      --highlight: #A78BFA;
      --text: #F9FAFB;
      --card-bg: rgba(30, 41, 59, 0.9);
      --shadow: rgba(0, 0, 0, 0.3);
      --gradient: linear-gradient(135deg, #0A1122, #1A2A44);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Source Sans Pro', sans-serif;
      background: var(--gradient);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      position: relative;
    }

    canvas#particlesCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.7;
    }

    .header {
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
      background: var(--primary);
      color: var(--text);
      box-shadow: 0 2px 10px var(--shadow);
      z-index: 10;
      animation: fadeIn 0.5s ease-in;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .brand-icon {
      width: 44px;
      height: 44px;
      background: var(--highlight);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      font-size: 2rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px var(--highlight);
    }

    .brand-icon:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px var(--highlight);
    }

    .brand-text {
      font-family: 'Poppins', sans-serif;
      font-size: 2rem;
      font-weight: 600;
      letter-spacing: 1.2px;
      text-shadow: 0 0 6px var(--secondary);
    }

    .nav-links {
      display: flex;
      gap: 18px;
    }

    .nav-btn {
      background: transparent;
      border: 2px solid var(--accent);
      border-radius: 10px;
      padding: 10px 25px;
      color: var(--text);
      font-size: 1.1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px var(--accent);
      animation: pulse 2.5s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 10px var(--accent); opacity: 1; }
      50% { box-shadow: 0 0 15px var(--accent); opacity: 0.9; }
      100% { box-shadow: 0 0 10px var(--accent); opacity: 1; }
    }

    .nav-btn:hover {
      background: var(--accent);
      color: var(--primary);
      transform: scale(1.05);
      box-shadow: 0 0 20px var(--accent);
    }

    .nav-btn a {
      color: inherit;
      text-decoration: none;
    }

    .game-container {
      width: 90%;
      max-width: 950px;
      padding: 35px;
      background: var(--card-bg);
      border-radius: 16px;
      margin: 90px auto 25px;
      box-shadow: 0 6px 14px var(--shadow), 0 0 15px var(--highlight);
      text-align: center;
      animation: slideUp 0.5s ease-in;
      border: 2px solid var(--highlight);
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .game-title {
      font-family: 'Poppins', sans-serif;
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 25px;
      color: var(--highlight);
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px var(--highlight);
    }

    .difficulty-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      border-radius: 16px;
      padding: 35px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 6px 14px var(--shadow), 0 0 15px var(--secondary);
      z-index: 20;
      display: none;
      flex-direction: column;
      gap: 18px;
      animation: slideUp 0.4s ease-in;
      border: 2px solid var(--highlight);
    }

    .difficulty-modal.show {
      display: flex;
    }

    .difficulty-btn {
      background: var(--primary);
      border: 2px solid var(--secondary);
      border-radius: 10px;
      padding: 14px 35px;
      color: var(--text);
      font-size: 1.2rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px var(--secondary);
      animation: pulse 2.5s infinite;
    }

    .difficulty-btn:hover {
      background: var(--secondary);
      color: var(--primary);
      transform: scale(1.05);
      box-shadow: 0 0 20px var(--secondary);
    }

    .progress-bar {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 25px;
      max-width: 750px;
      margin-left: auto;
      margin-right: auto;
      flex-wrap: wrap;
    }

    .progress-circle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--text);
      border: 2px solid var(--highlight);
      transition: all 0.3s ease;
    }

    .progress-circle.correct {
      background: var(--accent);
      border-color: var(--accent);
      box-shadow: 0 0 12px var(--accent);
    }

    .progress-circle.incorrect {
      background: #F87171;
      border-color: #F87171;
      box-shadow: 0 0 12px #F87171;
    }

    .timer-bar-container {
      width: 320px;
      height: 35px;
      background: var(--card-bg);
      border-radius: 18px;
      overflow: hidden;
      margin: 25px auto;
      position: relative;
      display: none;
      box-shadow: 0 3px 10px var(--shadow), 0 0 10px var(--highlight);
      border: 2px solid var(--highlight);
    }

    .timer-bar {
      height: 100%;
      background: linear-gradient(to right, var(--accent), var(--secondary));
      transition: width 1s linear;
      border-radius: 18px 0 0 18px;
    }

    .timer-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.3rem;
      font-weight: 500;
      color: var(--text);
      text-shadow: 0 0 8px var(--highlight);
    }

    .word-container {
      font-size: 1.8rem;
      margin-bottom: 25px;
      padding: 25px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      border-radius: 12px;
      box-shadow: 0 3px 10px var(--shadow), 0 0 15px var(--secondary);
      line-height: 1.5;
      animation: slideUp 0.4s ease-in;
      color: var(--text);
      border: 2px solid var(--highlight);
      text-shadow: 0 0 6px var(--text);
    }

    .input-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px auto;
      max-width: 500px;
    }

    .answer-input {
      background: var(--card-bg);
      border: 2px solid var(--secondary);
      border-radius: 12px;
      padding: 14px;
      color: var(--text);
      font-size: 1.2rem;
      font-weight: 500;
      width: 70%;
      outline: none;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px var(--secondary);
    }

    .answer-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 15px var(--accent);
    }

    .answer-input.correct {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--primary);
      box-shadow: 0 0 15px var(--accent);
    }

    .answer-input.incorrect {
      background: #F87171;
      border-color: #F87171;
      color: var(--text);
      box-shadow: 0 0 15px #F87171;
    }

    .submit-btn {
      background: var(--primary);
      border: 2px solid var(--secondary);
      border-radius: 12px;
      padding: 14px 25px;
      color: var(--text);
      font-size: 1.2rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px var(--secondary);
      animation: pulse 2.5s infinite;
    }

    .submit-btn:hover {
      background: var(--secondary);
      color: var(--primary);
      transform: scale(1.05);
      box-shadow: 0 0 20px var(--secondary);
    }

    .score-board {
      display: none;
      gap: 25px;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 25px;
      color: var(--text);
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(52, 211, 153, 0.2));
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--secondary);
      border: 2px solid var(--highlight);
      animation: scaleIn 0.5s ease-in;
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .score-board span {
      font-family: 'Poppins', sans-serif;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      text-shadow: 0 0 8px var(--text);
    }

    #score {
      color: var(--secondary);
      font-weight: 700;
      text-shadow: 0 0 10px var(--secondary);
    }

    #currentWord, #totalWords {
      color: var(--accent);
      font-weight: 700;
      text-shadow: 0 0 10px var(--accent);
    }

    #gameOverModal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      border-radius: 16px;
      padding: 35px;
      max-width: 550px;
      width: 90%;
      text-align: center;
      box-shadow: 0 6px 14px var(--shadow), 0 0 15px var(--highlight);
      z-index: 20;
      border: 2px solid var(--highlight);
    }

    #gameOverModal.show {
      display: block;
      animation: slideUp 0.4s ease-in;
    }

    #gameOverText {
      font-family: 'Poppins', sans-serif;
      font-size: 2.2rem;
      margin-bottom: 25px;
      font-weight: 600;
      color: var(--highlight);
      text-shadow: 0 0 10px var(--highlight);
    }

    #restartButton {
      background: var(--primary);
      border: 2px solid var(--accent);
      border-radius: 10px;
      padding: 14px 35px;
      color: var(--text);
      font-size: 1.3rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px var(--accent);
      animation: pulse 2.5s infinite;
    }

    #restartButton:hover {
      background: var(--accent);
      color: var(--primary);
      transform: scale(1.05);
      box-shadow: 0 0 20px var(--accent);
    }

    .footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      text-align: center;
      padding: 15px;
      background: var(--primary);
      color: var(--text);
      font-size: 1rem;
      font-weight: 500;
      box-shadow: 0 -3px 10px var(--shadow);
      animation: fadeIn 0.5s ease-in;
    }

    .footer a {
      color: var(--secondary);
      text-decoration: none;
      margin: 0 12px;
      transition: all 0.3s ease;
      text-shadow: 0 0 6px var(--secondary);
    }

    .footer a:hover {
      color: var(--highlight);
      text-shadow: 0 0 10px var(--highlight);
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      .game-container { width: 95%; margin: 80px auto 20px; }
      .game-title { font-size: 2.4rem; }
      .word-container { font-size: 1.6rem; padding: 20px; }
      .answer-input { font-size: 1.1rem; padding: 12px; width: 65%; }
      .submit-btn { font-size: 1.1rem; padding: 12px 20px; }
      .progress-bar { max-width: 650px; }
      .progress-circle { width: 18px; height: 18px; }
      .timer-bar-container { width: 280px; height: 30px; }
      .timer-text { font-size: 1.2rem; }
      .score-board { font-size: 1.3rem; padding: 15px; gap: 20px; }
      .header { padding: 12px 25px; }
      .brand-text { font-size: 1.8rem; }
      .brand-icon { width: 40px; height: 40px; font-size: 1.8rem; }
      .nav-btn { padding: 8px 18px; font-size: 1rem; }
    }

    @media (max-width: 480px) {
      .game-container { width: 95%; margin: 70px auto 15px; }
      .game-title { font-size: 2rem; }
      .word-container { font-size: 1.4rem; padding: 15px; }
      .answer-input { font-size: 1rem; padding: 10px; width: 60%; }
      .submit-btn { font-size: 1rem; padding: 10px 15px; }
      .progress-bar { max-width: 450px; }
      .progress-circle { width: 16px; height: 16px; }
      .timer-bar-container { width: 240px; height: 25px; }
      .timer-text { font-size: 1.1rem; }
      .score-board { font-size: 1.2rem; padding: 12px; gap: 15px; }
      .header { padding: 10px 20px; }
      .brand-text { font-size: 1.6rem; }
      .brand-icon { width: 36px; height: 36px; font-size: 1.6rem; }
      .nav-btn { padding: 6px 15px; font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <canvas id="particlesCanvas"></canvas>
  <header class="header">
    <div class="logo">
      <div class="brand-icon">N</div>
      <span class="brand-text">NeoCoder</span>
    </div>
    <nav class="nav-links">
        <a href="../index.html" style="text-decoration:none;" class="nav-btn">Bosh Sahifa</a>
        <a href="../lessons.html" style="text-decoration:none;" class="nav-btn">Darslar</a>
        <a href="../games.html" style="text-decoration:none;" class="nav-btn">Arcade</a>
        <a href="../profile.html" style="text-decoration:none;" class="nav-btn">Profile</a>
    </nav>
  </header>

  <div class="game-container">
    <h1 class="game-title">NeoCoder Translation Game</h1>
    <div class="difficulty-modal show" id="difficultyModal">
      <h2>Select Mode</h2>
      <button class="difficulty-btn" data-level="beginner">Beginner</button>
      <button class="difficulty-btn" data-level="intermediate">Intermediate</button>
      <button class="difficulty-btn" data-level="advanced">Advanced</button>
      <button class="difficulty-btn" data-level="assessment">Level Assessment</button>
    </div>
    <div class="progress-bar" id="progressBar"></div>
    <div class="timer-bar-container" id="timerBarContainer">
      <div class="timer-bar" id="timerBar"></div>
      <div class="timer-text" id="timerText">30</div>
    </div>
    <div class="word-container" id="wordContainer"></div>
    <div class="input-container" id="inputContainer">
      <input type="text" class="answer-input" id="answerInput" placeholder="Enter translation">
      <button class="submit-btn" id="submitButton">Submit</button>
    </div>
    <div class="score-board" id="scoreBoard">
      <span>Score: <span id="score">0</span></span>
      <span>Word: <span id="currentWord">0</span>/<span id="totalWords">50</span></span>
    </div>
    <div id="gameOverModal">
      <div id="gameOverText"></div>
      <button id="restartButton">Restart Game</button>
    </div>
  </div>

  <footer class="footer">
    <span>© 2025 NeoCoder | <a href="#">Privacy</a> | <a href="#">Terms</a></span>
  </footer>

  <script>
    // So'zlar bazasi (300 ta namuna so'z, har darajada 100 ta, to'liq 3000+ ga kengaytirilishi mumkin)
    const words = [
      // Beginner Level (100 so'z)
      { level: "beginner", word: "book", translations: ["kitob"], synonyms: ["kitobcha", "deftar"] },
      { level: "beginner", word: "kitob", translations: ["book"], synonyms: ["notebook", "textbook"] },
      { level: "beginner", word: "house", translations: ["uy"], synonyms: ["xona", "hovli"] },
      { level: "beginner", word: "uy", translations: ["house"], synonyms: ["home", "residence"] },
      { level: "beginner", word: "car", translations: ["mashina"], synonyms: ["avtomobil"] },
      { level: "beginner", word: "mashina", translations: ["car"], synonyms: ["vehicle", "automobile"] },
      { level: "beginner", word: "dog", translations: ["it"], synonyms: ["kuchuk"] },
      { level: "beginner", word: "it", translations: ["dog"], synonyms: ["puppy"] },
      { level: "beginner", word: "cat", translations: ["mushuk"], synonyms: ["mushukcha"] },
      { level: "beginner", word: "mushuk", translations: ["cat"], synonyms: ["kitten"] },
      { level: "beginner", word: "tree", translations: ["daraxt"], synonyms: ["yog'och"] },
      { level: "beginner", word: "daraxt", translations: ["tree"], synonyms: ["plant"] },
      { level: "beginner", word: "water", translations: ["suv"], synonyms: ["suvli"] },
      { level: "beginner", word: "suv", translations: ["water"], synonyms: ["liquid"] },
      { level: "beginner", word: "sun", translations: ["quyosh"], synonyms: ["oftob"] },
      { level: "beginner", word: "quyosh", translations: ["sun"], synonyms: ["solar"] },
      { level: "beginner", word: "food", translations: ["ovqat"], synonyms: ["taom"] },
      { level: "beginner", word: "ovqat", translations: ["food"], synonyms: ["meal"] },
      { level: "beginner", word: "school", translations: ["maktab"], synonyms: ["o'quv"] },
      { level: "beginner", word: "maktab", translations: ["school"], synonyms: ["academy"] },
      { level: "beginner", word: "pen", translations: ["ruchka"], synonyms: ["qalam"] },
      { level: "beginner", word: "ruchka", translations: ["pen"], synonyms: ["pencil"] },
      { level: "beginner", word: "table", translations: ["stol"], synonyms: ["dasturxon"] },
      { level: "beginner", word: "stol", translations: ["table"], synonyms: ["desk"] },
      { level: "beginner", word: "chair", translations: ["stul"], synonyms: ["kreslo"] },
      { level: "beginner", word: "stul", translations: ["chair"], synonyms: ["seat"] },
      { level: "beginner", word: "door", translations: ["eshik"], synonyms: ["darvoza"] },
      { level: "beginner", word: "eshik", translations: ["door"], synonyms: ["gate"] },
      { level: "beginner", word: "window", translations: ["deraza"], synonyms: ["oyna"] },
      { level: "beginner", word: "deraza", translations: ["window"], synonyms: ["pane"] },
      { level: "beginner", word: "friend", translations: ["do'st"], synonyms: ["o'rtoq"] },
      { level: "beginner", word: "do'st", translations: ["friend"], synonyms: ["buddy"] },
      { level: "beginner", word: "day", translations: ["kun"], synonyms: ["ruz"] },
      { level: "beginner", word: "kun", translations: ["day"], synonyms: ["date"] },
      { level: "beginner", word: "night", translations: ["tun"], synonyms: ["kecha"] },
      { level: "beginner", word: "tun", translations: ["night"], synonyms: ["evening"] },
      { level: "beginner", word: "mother", translations: ["ona"], synonyms: ["mama"] },
      { level: "beginner", word: "ona", translations: ["mother"], synonyms: ["mom"] },
      { level: "beginner", word: "father", translations: ["ota"], synonyms: ["dada"] },
      { level: "beginner", word: "ota", translations: ["father"], synonyms: ["dad"] },
      { level: "beginner", word: "child", translations: ["bola"], synonyms: ["farzand"] },
      { level: "beginner", word: "bola", translations: ["child"], synonyms: ["kid"] },
      { level: "beginner", word: "apple", translations: ["olma"], synonyms: ["meva"] },
      { level: "beginner", word: "olma", translations: ["apple"], synonyms: ["fruit"] },
      { level: "beginner", word: "bread", translations: ["non"], synonyms: ["patir"] },
      { level: "beginner", word: "non", translations: ["bread"], synonyms: ["loaf"] },
      { level: "beginner", word: "milk", translations: ["sut"], synonyms: ["suvli ichimlik"] },
      { level: "beginner", word: "sut", translations: ["milk"], synonyms: ["dairy"] },
      { level: "beginner", word: "sky", translations: ["osmon"], synonyms: ["falak"] },
      { level: "beginner", word: "osmon", translations: ["sky"], synonyms: ["heaven"] },
      { level: "beginner", word: "hand", translations: ["qo'l"], synonyms: ["kaft"] },
      { level: "beginner", word: "qo'l", translations: ["hand"], synonyms: ["palm"] },
      { level: "beginner", word: "foot", translations: ["oyoq"], synonyms: ["poy"] },
      { level: "beginner", word: "oyoq", translations: ["foot"], synonyms: ["leg"] },
      { level: "beginner", word: "eye", translations: ["ko'z"], synonyms: ["nazar"] },
      { level: "beginner", word: "ko'z", translations: ["eye"], synonyms: ["vision"] },
      { level: "beginner", word: "heart", translations: ["yurak"], synonyms: ["dil"] },
      { level: "beginner", word: "yurak", translations: ["heart"], synonyms: ["core"] },
      { level: "beginner", word: "flower", translations: ["gul"], synonyms: ["chaman"] },
      { level: "beginner", word: "gul", translations: ["flower"], synonyms: ["bloom"] },
      { level: "beginner", word: "bird", translations: ["qush"], synonyms: ["parinda"] },
      { level: "beginner", word: "qush", translations: ["bird"], synonyms: ["fowl"] },
      { level: "beginner", word: "fish", translations: ["baliq"], synonyms: ["suv hayvoni"] },
      { level: "beginner", word: "baliq", translations: ["fish"], synonyms: ["sea creature"] },
      { level: "beginner", word: "moon", translations: ["oy"], synonyms: ["mahtob"] },
      { level: "beginner", word: "oy", translations: ["moon"], synonyms: ["lunar"] },
      { level: "beginner", word: "star", translations: ["yulduz"], synonyms: ["sitora"] },
      { level: "beginner", word: "yulduz", translations: ["star"], synonyms: ["aster"] },
      { level: "beginner", word: "cloud", translations: ["bulut"], synonyms: ["havo"] },
      { level: "beginner", word: "bulut", translations: ["cloud"], synonyms: ["mist"] },
      { level: "beginner", word: "road", translations: ["yo'l"], synonyms: ["trassa"] },
      { level: "beginner", word: "yo'l", translations: ["road"], synonyms: ["path"] },
      { level: "beginner", word: "river", translations: ["daryo"], synonyms: ["oqim"] },
      { level: "beginner", word: "daryo", translations: ["river"], synonyms: ["stream"] },
      { level: "beginner", word: "fire", translations: ["olov"], synonyms: ["yong'in"] },
      { level: "beginner", word: "olov", translations: ["fire"], synonyms: ["flame"] },
      { level: "beginner", word: "wind", translations: ["shamol"], synonyms: ["yel"] },
      { level: "beginner", word: "shamol", translations: ["wind"], synonyms: ["breeze"] },
      { level: "beginner", word: "rain", translations: ["yomg'ir"], synonyms: ["suv"] },
      { level: "beginner", word: "yomg'ir", translations: ["rain"], synonyms: ["shower"] },
      { level: "beginner", word: "snow", translations: ["qor"], synonyms: ["barf"] },
      { level: "beginner", word: "qor", translations: ["snow"], synonyms: ["frost"] },
      { level: "beginner", word: "home", translations: ["uy"], synonyms: ["xonadon"] },
      { level: "beginner", word: "uy", translations: ["home"], synonyms: ["house"] },
      { level: "beginner", word: "food", translations: ["taom"], synonyms: ["ovqat"] },
      { level: "beginner", word: "taom", translations: ["food"], synonyms: ["meal"] },
      { level: "beginner", word: "book", translations: ["adabiyot"], synonyms: ["kitob"] },
      { level: "beginner", word: "adabiyot", translations: ["book"], synonyms: ["literature"] },
      { level: "beginner", word: "pen", translations: ["qalam"], synonyms: ["ruchka"] },
      { level: "beginner", word: "qalam", translations: ["pen"], synonyms: ["pencil"] },
      { level: "beginner", word: "paper", translations: ["qog'oz"], synonyms: ["varaq"] },
      { level: "beginner", word: "qog'oz", translations: ["paper"], synonyms: ["sheet"] },
      { level: "beginner", word: "room", translations: ["xona"], synonyms: ["hujra"] },
      { level: "beginner", word: "xona", translations: ["room"], synonyms: ["space"] },
      { level: "beginner", word: "street", translations: ["ko'cha"], synonyms: ["yo'l"] },
      { level: "beginner", word: "ko'cha", translations: ["street"], synonyms: ["avenue"] },
      { level: "beginner", word: "city", translations: ["shahar"], synonyms: ["qishloq"] },
      { level: "beginner", word: "shahar", translations: ["city"], synonyms: ["town"] },
      // Intermediate Level (100 so'z)
      { level: "intermediate", word: "quick", translations: ["tezkor"], synonyms: ["tez", "tezda"] },
      { level: "intermediate", word: "tezkor", translations: ["quick"], synonyms: ["fast", "swift"] },
      { level: "intermediate", word: "happy", translations: ["baxtli"], synonyms: ["xursand", "quvonchli"] },
      { level: "intermediate", word: "baxtli", translations: ["happy"], synonyms: ["joyful", "cheerful"] },
      { level: "intermediate", word: "work", translations: ["ish"], synonyms: ["vazifa", "mehnat"] },
      { level: "intermediate", word: "ish", translations: ["work"], synonyms: ["job", "task"] },
      { level: "intermediate", word: "beautiful", translations: ["chiroyli"], synonyms: ["go'zal"] },
      { level: "intermediate", word: "chiroyli", translations: ["beautiful"], synonyms: ["pretty", "lovely"] },
      { level: "intermediate", word: "time", translations: ["vaqt"], synonyms: ["soat"] },
      { level: "intermediate", word: "vaqt", translations: ["time"], synonyms: ["hour", "moment"] },
      { level: "intermediate", word: "learn", translations: ["o'rganmoq"], synonyms: ["ta'lim"] },
      { level: "intermediate", word: "o'rganmoq", translations: ["learn"], synonyms: ["study", "acquire"] },
      { level: "intermediate", word: "city", translations: ["shahar"], synonyms: ["qishloq"] },
      { level: "intermediate", word: "shahar", translations: ["city"], synonyms: ["town", "urban"] },
      { level: "intermediate", word: "effort", translations: ["harakat"], synonyms: ["sa'y"] },
      { level: "intermediate", word: "harakat", translations: ["effort"], synonyms: ["try", "attempt"] },
      { level: "intermediate", word: "decision", translations: ["qaror"], synonyms: ["tanlov"] },
      { level: "intermediate", word: "qaror", translations: ["decision"], synonyms: ["choice", "resolution"] },
      { level: "intermediate", word: "knowledge", translations: ["bilim"], synonyms: ["ilm"] },
      { level: "intermediate", word: "bilim", translations: ["knowledge"], synonyms: ["information", "learning"] },
      { level: "intermediate", word: "help", translations: ["yordam"], synonyms: ["ko'mak"] },
      { level: "intermediate", word: "yordam", translations: ["help"], synonyms: ["aid", "support"] },
      { level: "intermediate", word: "success", translations: ["muvaffaqiyat"], synonyms: ["yutuq"] },
      { level: "intermediate", word: "muvaffaqiyat", translations: ["success"], synonyms: ["achievement", "victory"] },
      { level: "intermediate", word: "idea", translations: ["fikr"], synonyms: ["g'oya"] },
      { level: "intermediate", word: "fikr", translations: ["idea"], synonyms: ["thought", "concept"] },
      { level: "intermediate", word: "problem", translations: ["muammo"], synonyms: ["masala"] },
      { level: "intermediate", word: "muammo", translations: ["problem"], synonyms: ["issue", "trouble"] },
      { level: "intermediate", word: "question", translations: ["savol"], synonyms: ["so'roq"] },
      { level: "intermediate", word: "savol", translations: ["question"], synonyms: ["query", "inquiry"] },
      { level: "intermediate", word: "love", translations: ["sevgi"], synonyms: ["muhabbat"] },
      { level: "intermediate", word: "sevgi", translations: ["love"], synonyms: ["affection", "passion"] },
      { level: "intermediate", word: "health", translations: ["salomatlik"], synonyms: ["sog'lik"] },
      { level: "intermediate", word: "salomatlik", translations: ["health"], synonyms: ["wellness", "fitness"] },
      { level: "intermediate", word: "money", translations: ["pul"], synonyms: ["naqd"] },
      { level: "intermediate", word: "pul", translations: ["money"], synonyms: ["cash", "currency"] },
      { level: "intermediate", word: "family", translations: ["oila"], synonyms: ["xonadon"] },
      { level: "intermediate", word: "oila", translations: ["family"], synonyms: ["household", "kin"] },
      { level: "intermediate", word: "job", translations: ["kasb"], synonyms: ["ish joyi"] },
      { level: "intermediate", word: "kasb", translations: ["job"], synonyms: ["occupation", "profession"] },
      { level: "intermediate", word: "nature", translations: ["tabiat"], synonyms: ["olam"] },
      { level: "intermediate", word: "tabiat", translations: ["nature"], synonyms: ["environment", "wild"] },
      { level: "intermediate", word: "travel", translations: ["sayohat"], synonyms: ["safar"] },
      { level: "intermediate", word: "sayohat", translations: ["travel"], synonyms: ["journey", "trip"] },
      { level: "intermediate", word: "music", translations: ["musiqa"], synonyms: ["saz"] },
      { level: "intermediate", word: "musiqa", translations: ["music"], synonyms: ["melody", "tune"] },
      { level: "intermediate", word: "dream", translations: ["orzu"], synonyms: ["xayol"] },
      { level: "intermediate", word: "orzu", translations: ["dream"], synonyms: ["wish", "hope"] },
      { level: "intermediate", word: "goal", translations: ["maqsad"], synonyms: ["nishon"] },
      { level: "intermediate", word: "maqsad", translations: ["goal"], synonyms: ["aim", "objective"] },
      { level: "intermediate", word: "plan", translations: ["reja"], synonyms: ["tadbir"] },
      { level: "intermediate", word: "reja", translations: ["plan"], synonyms: ["strategy", "scheme"] },
      { level: "intermediate", word: "life", translations: ["hayot"], synonyms: ["umr"] },
      { level: "intermediate", word: "hayot", translations: ["life"], synonyms: ["existence", "living"] },
      { level: "intermediate", word: "world", translations: ["dunya"], synonyms: ["jahon"] },
      { level: "intermediate", word: "dunya", translations: ["world"], synonyms: ["globe", "earth"] },
      { level: "intermediate", word: "peace", translations: ["tinchlik"], synonyms: ["osoyishtalik"] },
      { level: "intermediate", word: "tinchlik", translations: ["peace"], synonyms: ["calm", "tranquility"] },
      { level: "intermediate", word: "hope", translations: ["umid"], synonyms: ["ishonch"] },
      { level: "intermediate", word: "umid", translations: ["hope"], synonyms: ["expectation", "wish"] },
      { level: "intermediate", word: "fear", translations: ["qo'rquv"], synonyms: ["xavotir"] },
      { level: "intermediate", word: "qo'rquv", translations: ["fear"], synonyms: ["anxiety", "dread"] },
      { level: "intermediate", word: "strength", translations: ["kuch"], synonyms: ["quvvat"] },
      { level: "intermediate", word: "kuch", translations: ["strength"], synonyms: ["power", "force"] },
      { level: "intermediate", word: "mind", translations: ["aql"], synonyms: ["idrok"] },
      { level: "intermediate", word: "aql", translations: ["mind"], synonyms: ["intellect", "brain"] },
      { level: "intermediate", word: "beauty", translations: ["go'zallik"], synonyms: ["chiroy"] },
      { level: "intermediate", word: "go'zallik", translations: ["beauty"], synonyms: ["charm", "elegance"] },
      { level: "intermediate", word: "truth", translations: ["haqiqat"], synonyms: ["rostlik"] },
      { level: "intermediate", word: "haqiqat", translations: ["truth"], synonyms: ["reality", "fact"] },
      { level: "intermediate", word: "freedom", translations: ["erkinlik"], synonyms: ["ozodlik"] },
      { level: "intermediate", word: "erkinlik", translations: ["freedom"], synonyms: ["liberty", "independence"] },
      { level: "intermediate", word: "culture", translations: ["madaniyat"], synonyms: ["an'ana"] },
      { level: "intermediate", word: "madaniyat", translations: ["culture"], synonyms: ["tradition", "heritage"] },
      { level: "intermediate", word: "education", translations: ["ta'lim"], synonyms: ["o'qish"] },
      { level: "intermediate", word: "ta'lim", translations: ["education"], synonyms: ["learning", "study"] },
      { level: "intermediate", word: "science", translations: ["ilm-fan"], synonyms: ["fan"] },
      { level: "intermediate", word: "ilm-fan", translations: ["science"], synonyms: ["knowledge", "research"] },
      { level: "intermediate", word: "history", translations: ["tarix"], synonyms: ["o'tmish"] },
      { level: "intermediate", word: "tarix", translations: ["history"], synonyms: ["past", "heritage"] },
      { level: "intermediate", word: "art", translations: ["san'at"], synonyms: ["ijod"] },
      { level: "intermediate", word: "san'at", translations: ["art"], synonyms: ["creation", "craft"] },
      { level: "intermediate", word: "sport", translations: ["sport"], synonyms: ["mashq"] },
      { level: "intermediate", word: "sport", translations: ["sport"], synonyms: ["exercise", "game"] },
      { level: "intermediate", word: "team", translations: ["jamoa"], synonyms: ["guruh"] },
      { level: "intermediate", word: "jamoa", translations: ["team"], synonyms: ["group", "squad"] },
      { level: "intermediate", word: "project", translations: ["loyiha"], synonyms: ["rejasi"] },
      { level: "intermediate", word: "loyiha", translations: ["project"], synonyms: ["plan", "initiative"] },
      { level: "intermediate", word: "skill", translations: ["mahorat"], synonyms: ["ko'nikma"] },
      { level: "intermediate", word: "mahorat", translations: ["skill"], synonyms: ["ability", "talent"] },
      { level: "intermediate", word: "future", translations: ["kelajak"], synonyms: ["istiqbol"] },
      { level: "intermediate", word: "kelajak", translations: ["future"], synonyms: ["tomorrow", "prospect"] },
      // Advanced Level (100 so'z)
      { level: "advanced", word: "ubiquitous", translations: ["hamma joyda"], synonyms: ["har yerde", "umumiy"] },
      { level: "advanced", word: "hamma joyda", translations: ["ubiquitous"], synonyms: ["everywhere", "omnipresent"] },
      { level: "advanced", word: "resilient", translations: ["bardoshli"], synonyms: ["mustahkam"] },
      { level: "advanced", word: "bardoshli", translations: ["resilient"], synonyms: ["buoyant", "adaptable"] },
      { level: "advanced", word: "meticulous", translations: ["ehtiyotkor"], synonyms: ["sinchkov"] },
      { level: "advanced", word: "ehtiyotkor", translations: ["meticulous"], synonyms: ["careful", "precise"] },
      { level: "advanced", word: "ephemeral", translations: ["vaqtinchalik"], synonyms: ["qisqa muddatli"] },
      { level: "advanced", word: "vaqtinchalik", translations: ["ephemeral"], synonyms: ["temporary", "transient"] },
      { level: "advanced", word: "articulate", translations: ["aniq ifodalamoq"], synonyms: ["ravon"] },
      { level: "advanced", word: "aniq ifodalamoq", translations: ["articulate"], synonyms: ["eloquent", "fluent"] },
      { level: "advanced", word: "cohesive", translations: ["birlashtiruvchi"], synonyms: ["yaxlit"] },
      { level: "advanced", word: "birlashtiruvchi", translations: ["cohesive"], synonyms: ["united", "integrated"] },
      { level: "advanced", word: "pristine", translations: ["toza"], synonyms: ["pok"] },
      { level: "advanced", word: "toza", translations: ["pristine"], synonyms: ["clean", "pure"] },
      { level: "advanced", word: "scrutinize", translations: ["sinchiklab tekshirish"], synonyms: ["ko'zdan kechirmoq"] },
      { level: "advanced", word: "sinchiklab tekshirish", translations: ["scrutinize"], synonyms: ["examine", "inspect"] },
      { level: "advanced", word: "fortuitous", translations: ["tasodifiy"], synonyms: ["kutilmagan"] },
      { level: "advanced", word: "tasodifiy", translations: ["fortuitous"], synonyms: ["accidental", "lucky"] },
      { level: "advanced", word: "redundant", translations: ["ortiqcha"], synonyms: ["foydasiz"] },
      { level: "advanced", word: "ortiqcha", translations: ["redundant"], synonyms: ["unnecessary", "excess"] },
      { level: "advanced", word: "vibrant", translations: ["jonli"], synonyms: ["tirik"] },
      { level: "advanced", word: "jonli", translations: ["vibrant"], synonyms: ["lively", "dynamic"] },
      { level: "advanced", word: "intricate", translations: ["murakkab"], synonyms: ["chigal"] },
      { level: "advanced", word: "murakkab", translations: ["intricate"], synonyms: ["complex", "complicated"] },
      { level: "advanced", word: "expedite", translations: ["tezlashtirmoq"], synonyms: ["joriy qilmoq"] },
      { level: "advanced", word: "tezlashtirmoq", translations: ["expedite"], synonyms: ["hasten", "accelerate"] },
      { level: "advanced", word: "obscure", translations: ["noaniq"], synonyms: ["tushunarsiz"] },
      { level: "advanced", word: "noaniq", translations: ["obscure"], synonyms: ["unclear", "vague"] },
      { level: "advanced", word: "ameliorate", translations: ["yaxshilamoq"], synonyms: ["takomillashtirmoq"] },
      { level: "advanced", word: "yaxshilamoq", translations: ["ameliorate"], synonyms: ["improve", "enhance"] },
      { level: "advanced", word: "transient", translations: ["o'tkinchi"], synonyms: ["muvaqqat"] },
      { level: "advanced", word: "o'tkinchi", translations: ["transient"], synonyms: ["temporary", "fleeting"] },
      { level: "advanced", word: "candid", translations: ["samimiy"], synonyms: ["ochiq"] },
      { level: "advanced", word: "samimiy", translations: ["candid"], synonyms: ["honest", "frank"] },
      { level: "advanced", word: "superfluous", translations: ["ortiqcha"], synonyms: ["keraksiz"] },
      { level: "advanced", word: "ortiqcha", translations: ["superfluous"], synonyms: ["unnecessary", "excessive"] },
      { level: "advanced", word: "elucidate", translations: ["tushuntirmoq"], synonyms: ["aniqlashtirmoq"] },
      { level: "advanced", word: "tushuntirmoq", translations: ["elucidate"], synonyms: ["explain", "clarify"] },
      { level: "advanced", word: "tenuous", translations: ["nozik"], synonyms: ["zaif"] },
      { level: "advanced", word: "nozik", translations: ["tenuous"], synonyms: ["weak", "fragile"] },
      { level: "advanced", word: "profound", translations: ["chuqur"], synonyms: ["teran"] },
      { level: "advanced", word: "chuqur", translations: ["profound"], synonyms: ["deep", "significant"] },
      { level: "advanced", word: "obstinate", translations: ["qaysar"], synonyms: ["o'jar"] },
      { level: "advanced", word: "qaysar", translations: ["obstinate"], synonyms: ["stubborn", "inflexible"] },
      { level: "advanced", word: "mitigate", translations: ["yumshatmoq"], synonyms: ["kamaytirmoq"] },
      { level: "advanced", word: "yumshatmoq", translations: ["mitigate"], synonyms: ["alleviate", "reduce"] },
      { level: "advanced", word: "pervasive", translations: ["keng tarqalgan"], synonyms: ["umumiy"] },
      { level: "advanced", word: "keng tarqalgan", translations: ["pervasive"], synonyms: ["widespread", "common"] },
      { level: "advanced", word: "disparate", translations: ["turlicha"], synonyms: ["farqli"] },
      { level: "advanced", word: "turlicha", translations: ["disparate"], synonyms: ["different", "diverse"] },
      { level: "advanced", word: "epiphany", translations: ["vahi"], synonyms: ["tushuncha"] },
      { level: "advanced", word: "vahi", translations: ["epiphany"], synonyms: ["revelation", "insight"] },
      { level: "advanced", word: "ubiquity", translations: ["hamma joyda bo'lish"], synonyms: ["umumiy tarqalish"] },
      { level: "advanced", word: "hamma joyda bo'lish", translations: ["ubiquity"], synonyms: ["omnipresence", "prevalence"] },
      { level: "advanced", word: "altruistic", translations: ["fidokor"], synonyms: ["saxiy"] },
      { level: "advanced", word: "fidokor", translations: ["altruistic"], synonyms: ["selfless", "generous"] },
      { level: "advanced", word: "ambiguous", translations: ["noaniq"], synonyms: ["tushunarsiz"] },
      { level: "advanced", word: "noaniq", translations: ["ambiguous"], synonyms: ["vague", "unclear"] },
      { level: "advanced", word: "anomaly", translations: ["anomalya"], synonyms: ["chetlanish"] },
      { level: "advanced", word: "anomalya", translations: ["anomaly"], synonyms: ["abnormality", "irregularity"] },
      { level: "advanced", word: "benevolent", translations: ["mehribon"], synonyms: ["xayrixoh"] },
      { level: "advanced", word: "mehribon", translations: ["benevolent"], synonyms: ["kind", "compassionate"] },
      { level: "advanced", word: "cogent", translations: ["ishonarli"], synonyms: ["aniq"] },
      { level: "advanced", word: "ishonarli", translations: ["cogent"], synonyms: ["convincing", "compelling"] },
      { level: "advanced", word: "dearth", translations: ["yetishmaslik"], synonyms: ["kamchilik"] },
      { level: "advanced", word: "yetishmaslik", translations: ["dearth"], synonyms: ["scarcity", "lack"] },
      { level: "advanced", word: "efficacy", translations: ["samaradorlik"], synonyms: ["foydalilik"] },
      { level: "advanced", word: "samaradorlik", translations: ["efficacy"], synonyms: ["effectiveness", "potency"] },
      { level: "advanced", word: "foster", translations: ["rivojlantirmoq"], synonyms: ["tarbiyalamoq"] },
      { level: "advanced", word: "rivojlantirmoq", translations: ["foster"], synonyms: ["promote", "nurture"] },
      { level: "advanced", word: "gregarious", translations: ["do'stona"], synonyms: ["xushmuomala"] },
      { level: "advanced", word: "do'stona", translations: ["gregarious"], synonyms: ["sociable", "friendly"] },
      { level: "advanced", word: "impeccable", translations: ["mukammal"], synonyms: ["benuqson"] },
      { level: "advanced", word: "mukammal", translations: ["impeccable"], synonyms: ["perfect", "flawless"] },
      { level: "advanced", word: "juxtapose", translations: ["yonma-yon qo'ymoq"], synonyms: ["solishtirmoq"] },
      { level: "advanced", word: "yonma-yon qo'ymoq", translations: ["juxtapose"], synonyms: ["compare", "contrast"] },
      { level: "advanced", word: "lucid", translations: ["aniq"], synonyms: ["tushunarli"] },
      { level: "advanced", word: "aniq", translations: ["lucid"], synonyms: ["clear", "transparent"] },
      { level: "advanced", word: "mundane", translations: ["odatiy"], synonyms: ["zerikarli"] },
      { level: "advanced", word: "odatiy", translations: ["mundane"], synonyms: ["ordinary", "routine"] },
      { level: "advanced", word: "nuance", translations: ["nozik farq"], synonyms: ["xususiyat"] },
      { level: "advanced", word: "nozik farq", translations: ["nuance"], synonyms: ["subtlety", "shade"] },
      { level: "advanced", word: "paradox", translations: ["paradoks"], synonyms: ["ziddiyat"] },
      { level: "advanced", word: "paradoks", translations: ["paradox"], synonyms: ["contradiction", "anomaly"] }
      // To'liq 3000+ so'zga kengaytirish uchun shu formatda qo'shimcha so'zlar qo'shilishi mumkin
    ];

    const canvas = document.getElementById("particlesCanvas");
    const ctx = canvas.getContext("2d");
    let particles = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    function createParticles() {
      particles = [];
      for (let i = 0; i < 150; i++) { // Zarralar sonini 100 dan 150 ga oshirish
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          radius: Math.random() * 3 + 1.5,
          vx: (Math.random() - 0.5) * 1.5,
          vy: (Math.random() - 0.5) * 1.5,
          color: ["#38BDF8", "#34D399", "#A78BFA"][Math.floor(Math.random() * 3)]
        });
      }
    }

    function drawParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0 || p.x > canvas.width) p.vx = -p.vx;
        if (p.y < 0 || p.y > canvas.height) p.vy = -p.vy;
      });
      requestAnimationFrame(drawParticles);
    }

    window.addEventListener("resize", () => {
      resizeCanvas();
      createParticles();
    });
    resizeCanvas();
    createParticles();
    drawParticles();

    const difficultyModal = document.getElementById("difficultyModal");
    const progressBar = document.getElementById("progressBar");
    const timerBarContainer = document.getElementById("timerBarContainer");
    const timerBar = document.getElementById("timerBar");
    const timerText = document.getElementById("timerText");
    const wordContainer = document.getElementById("wordContainer");
    const inputContainer = document.getElementById("inputContainer");
    const answerInput = document.getElementById("answerInput");
    const submitButton = document.getElementById("submitButton");
    const scoreBoard = document.getElementById("scoreBoard");
    const scoreDisplay = document.getElementById("score");
    const currentWordDisplay = document.getElementById("currentWord");
    const totalWordsDisplay = document.getElementById("totalWords");
    const gameOverModal = document.getElementById("gameOverModal");
    const gameOverText = document.getElementById("gameOverText");
    const restartButton = document.getElementById("restartButton");

    let currentLevel = "";
    let currentWords = [];
    let currentWordIndex = 0;
    let score = 0;
    let timerInterval;
    let timeLeft = 30;
    let usedWords = []; // Ishlatilgan so'zlarni saqlash

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startGame(level) {
      currentLevel = level;
      console.log("Selected mode: " + level);
      let availableWords = words.filter(w => w.level === level && !usedWords.includes(w.word));
      if (level === "assessment") {
        availableWords = [
          ...words.filter(w => w.level === "beginner" && !usedWords.includes(w.word)).slice(0, 17),
          ...words.filter(w => w.level === "intermediate" && !usedWords.includes(w.word)).slice(0, 17),
          ...words.filter(w => w.level === "advanced" && !usedWords.includes(w.word)).slice(0, 16)
        ];
      }
      currentWords = shuffle(availableWords).slice(0, 50);
      totalWordsDisplay.textContent = "50";
      console.log("Filtered words: ", currentWords);
      if (currentWords.length < 50) {
        console.error("Not enough unique words for mode: " + level);
        alert("Not enough unique words available. Please reset used words or try another mode.");
        return;
      }
      currentWords.forEach(w => usedWords.push(w.word)); // Ishlatilgan so'zlarni qo'shish
      currentWordIndex = 0;
      score = 0;
      difficultyModal.classList.remove("show");
      difficultyModal.style.display = "none";
      timerBarContainer.style.display = "block";
      scoreBoard.style.display = "flex";
      inputContainer.style.display = "flex";
      progressBar.innerHTML = "";
      for (let i = 0; i < 50; i++) {
        const circle = document.createElement("div");
        circle.classList.add("progress-circle");
        progressBar.appendChild(circle);
      }
      displayWord();
      startTimer();
    }

    function displayWord() {
      if (currentWordIndex >= currentWords.length) {
        endGame();
        return;
      }
      const wordObj = currentWords[currentWordIndex];
      const isEnglish = Math.random() < 0.5;
      wordContainer.textContent = isEnglish ? wordObj.word : wordObj.translations[0];
      wordContainer.dataset.isEnglish = isEnglish;
      answerInput.value = "";
      answerInput.classList.remove("correct", "incorrect");
      answerInput.focus();
      currentWordDisplay.textContent = currentWordIndex + 1;
      scoreDisplay.textContent = score;
      timeLeft = 30;
      timerText.textContent = timeLeft;
      timerBar.style.width = "100%";
    }

    function startTimer() {
      clearInterval(timerInterval);
      timeLeft = 30;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerText.textContent = timeLeft;
        timerBar.style.width = `${(timeLeft / 30) * 100}%`;
        if (timeLeft <= 0) {
          checkAnswer("");
        }
      }, 1000);
    }

    function checkAnswer(input) {
      clearInterval(timerInterval);
      const wordObj = currentWords[currentWordIndex];
      const isEnglish = wordContainer.dataset.isEnglish === "true";
      const correctAnswers = isEnglish
        ? [...wordObj.translations, ...wordObj.synonyms]
        : [wordObj.word, ...wordObj.synonyms];
      const isCorrect = input.trim().toLowerCase() !== "" && correctAnswers.map(a => a.toLowerCase()).includes(input.trim().toLowerCase());
      const circle = progressBar.children[currentWordIndex];
      if (isCorrect) {
        score += 2;
        circle.classList.add("correct");
        answerInput.classList.add("correct");
      } else {
        circle.classList.add("incorrect");
        answerInput.classList.add("incorrect");
        wordContainer.textContent = `Correct: ${isEnglish ? wordObj.translations[0] : wordObj.word}`;
      }
      answerInput.disabled = true;
      submitButton.disabled = true;
      setTimeout(() => {
        answerInput.disabled = false;
        submitButton.disabled = false;
        currentWordIndex++;
        displayWord();
        startTimer();
      }, 1000);
    }

    function endGame() {
      clearInterval(timerInterval);
      timerBarContainer.style.display = "none";
      scoreBoard.style.display = "none";
      inputContainer.style.display = "none";
      wordContainer.textContent = "";
      gameOverModal.classList.add("show");
      let resultText = `Game Over! Your Score: ${score}/100`;
      if (currentLevel === "assessment") {
        const percentage = (score / 100) * 100;
        let ieltsLevel = "";
        if (percentage <= 20) {
          ieltsLevel = "IELTS 3.0–4.0 (Beginner)";
        } else if (percentage <= 40) {
          ieltsLevel = "IELTS 4.5–5.5 (Elementary to Pre-Intermediate)";
        } else if (percentage <= 60) {
          ieltsLevel = "IELTS 6.0–6.5 (Intermediate)";
        } else if (percentage <= 80) {
          ieltsLevel = "IELTS 7.0–7.5 (Upper-Intermediate)";
        } else {
          ieltsLevel = "IELTS 8.0–9.0 (Advanced)";
        }
        resultText += `\nYour Estimated IELTS Level: ${ieltsLevel}`;
      }
      gameOverText.textContent = resultText;
    }

    document.addEventListener("DOMContentLoaded", () => {
      difficultyModal.classList.add("show");
      difficultyModal.style.display = "flex";
    });

    document.querySelectorAll(".difficulty-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        startGame(btn.dataset.level);
      });
    });

    submitButton.addEventListener("click", () => {
      checkAnswer(answerInput.value);
    });

    answerInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        checkAnswer(answerInput.value);
      }
    });

    restartButton.addEventListener("click", () => {
      gameOverModal.classList.remove("show");
      difficultyModal.classList.add("show");
      difficultyModal.style.display = "flex";
      usedWords = []; // O'yin qayta boshlanganda ishlatilgan so'zlarni tozalash
    });
  </script>
</body>
</html>